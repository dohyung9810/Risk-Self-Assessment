<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì‚¬ì¥ë‹˜ ë…¸ë¬´ ë¦¬ìŠ¤í¬ 1ë¶„ ìê°€ì§„ë‹¨</title>
  <style>
    :root{
      --bg:#0b1220; --card:#111a2e; --card2:#0f172a;
      --text:#e5e7eb; --muted:#9ca3af;
      --line: rgba(255,255,255,.12);
      --btn:#e5e7eb; --btnText:#0b1220;
      --warn:#f59e0b; --danger:#ef4444; --ok:#22c55e;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, sans-serif;
      background: radial-gradient(1200px 700px at 20% 0%, #1a2a52 0%, var(--bg) 60%),
                  radial-gradient(900px 600px at 90% 10%, #2b1a52 0%, transparent 55%);
      color: var(--text);
      min-height:100vh;
      display:flex; align-items:center; justify-content:center;
      padding: 18px;
    }
    .app{
      width: min(520px, 100%);
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .header{
      padding: 18px 18px 12px;
      display:flex; gap:12px; align-items:center; justify-content:space-between;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
    }
    .logo{
      width:38px; height:38px; border-radius: 12px;
      background: linear-gradient(135deg, rgba(34,197,94,.9), rgba(245,158,11,.9), rgba(239,68,68,.9));
      filter: saturate(1.2);
    }
    .title{
      font-size: 16px; font-weight: 800; line-height: 1.15;
    }
    .subtitle{
      font-size: 12px; color: var(--muted); margin-top: 2px;
    }
    .progressWrap{
      display:flex; flex-direction:column; align-items:flex-end; gap:6px;
      min-width: 120px;
    }
    .progressText{
      font-size: 12px; color: var(--muted);
    }
    .bar{
      width: 120px; height: 8px; background: rgba(255,255,255,.08);
      border-radius: 999px; overflow:hidden; border: 1px solid rgba(255,255,255,.10);
    }
    .bar > div{
      height:100%; width:0%;
      background: linear-gradient(90deg, rgba(34,197,94,1), rgba(245,158,11,1), rgba(239,68,68,1));
      transition: width .25s ease;
    }
    .body{
      padding: 0 18px 16px;
    }
    .hero{
      padding: 14px 0 6px;
    }
    .hero h1{
      font-size: 22px; margin: 0 0 6px; letter-spacing: -0.3px;
    }
    .hero p{
      margin:0; color: var(--muted); font-size: 13px; line-height: 1.5;
    }
    .pillRow{
      display:flex; flex-wrap:wrap; gap:8px; margin-top: 12px;
    }
    .pill{
      font-size: 12px; padding: 7px 10px; border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.04);
      color: var(--text);
    }
    .divider{height:1px; background: var(--line); margin: 14px 0;}
    .stepTitle{
      margin: 0 0 6px;
      font-size: 16px; font-weight: 800;
      letter-spacing:-0.2px;
    }
    .stepDesc{
      margin: 0 0 12px;
      font-size: 13px; color: var(--muted); line-height:1.5;
    }
    .list{
      display:flex; flex-direction:column; gap:10px;
      margin: 10px 0 4px;
    }
    .item{
      display:flex; align-items:flex-start; gap:10px;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.15);
    }
    .item input{ transform: translateY(2px); width:18px; height:18px; }
    .item label{ flex:1; font-size: 14px; line-height:1.35; cursor:pointer; }
    .hint{
      margin-top: 10px;
      font-size: 12px; color: var(--muted);
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px dashed rgba(255,255,255,.18);
      background: rgba(255,255,255,.03);
    }
    .hint strong{ color: var(--text); }
    .ctaRow{
      display:flex; gap:10px; margin-top: 14px;
    }
    button{
      border:0; border-radius: 14px;
      padding: 12px 14px;
      font-weight: 800;
      cursor:pointer;
      transition: transform .06s ease, opacity .15s ease, background .15s ease;
      user-select:none;
    }
    button:active{ transform: scale(.99); }
    .btnPrimary{
      background: var(--btn);
      color: var(--btnText);
      flex: 1;
    }
    .btnGhost{
      background: transparent;
      border: 1px solid rgba(255,255,255,.18);
      color: var(--text);
      min-width: 110px;
    }
    .btnDangerGhost{
      background: rgba(239,68,68,.08);
      border: 1px solid rgba(239,68,68,.35);
      color: #fecaca;
      min-width: 110px;
    }
    .footerNote{
      margin-top: 10px;
      font-size: 11px; color: rgba(229,231,235,.70);
      line-height: 1.5;
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      margin: 10px 0 6px;
    }
    .dot{
      width: 12px; height: 12px; border-radius: 999px;
      background: var(--muted);
    }
    .dot.ok{ background: var(--ok); }
    .dot.warn{ background: var(--warn); }
    .dot.danger{ background: var(--danger); }

    .resultTitle{
      font-size: 20px; font-weight: 900; margin: 0 0 6px; letter-spacing:-0.3px;
    }
    .resultDesc{ margin:0; color: var(--muted); font-size: 13px; line-height:1.5; }
    .chips{
      display:flex; flex-wrap:wrap; gap:8px; margin-top: 12px;
    }
    .chip{
      font-size: 12px; padding: 7px 10px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
    }
    .chip.danger{ border-color: rgba(239,68,68,.45); background: rgba(239,68,68,.08); color: #fecaca; }
    .chip.warn{ border-color: rgba(245,158,11,.45); background: rgba(245,158,11,.08); color: #fde68a; }
    .chip.ok{ border-color: rgba(34,197,94,.45); background: rgba(34,197,94,.08); color: #bbf7d0; }
    .small{ font-size: 12px; color: var(--muted); }
    a.link{
      color: #93c5fd; text-decoration: none;
      border-bottom: 1px dashed rgba(147,197,253,.45);
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <div class="header">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <div class="title">ì‚¬ì¥ë‹˜ ë…¸ë¬´ ë¦¬ìŠ¤í¬ ìê°€ì§„ë‹¨</div>
            <div class="subtitle">ì§ì› 1~20ëª… ì†Œìƒê³µì¸ìš© Â· ì²´í¬ë§Œ í•˜ë©´ ë</div>
          </div>
        </div>
        <div class="progressWrap">
          <div class="progressText" id="progressText">0 / 0</div>
          <div class="bar"><div id="progressBar"></div></div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="body" id="screen"></div>
    </div>
    <div class="footerNote">
      â€» ë³¸ ë°ëª¨ëŠ” â€œìê°€ ì²´í¬ ê¸°ë°˜ ì°¸ê³ ìš© ì ê²€â€ í™”ë©´ ì˜ˆì‹œì…ë‹ˆë‹¤. ì‹¤ì œ ìƒí™©ì— ë”°ë¼ ê²°ê³¼ëŠ” ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </div>
  </div>

<script>
  // ---- ì„¤ë¬¸ ì •ì˜ (ë°°í¬ìš©: ìš©ì–´ ìµœì†Œí™”, ì²´í¬=YES ë°©ì‹) ----
  const steps = [
    {
      key: "intro",
      type: "intro",
      title: "1ë¶„ ìê°€ì§„ë‹¨",
      desc: "ì²´í¬ë§Œ í•˜ì‹œë©´ ë©ë‹ˆë‹¤. ëª¨ë¥´ë©´ <strong>YES(ì²´í¬)</strong>ë¡œ ë³´ëŠ” ê²Œ ì•ˆì „í•©ë‹ˆë‹¤.",
      pills: ["ì§ì› 1~20ëª…", "ëª¨ë°”ì¼ ìµœì í™”", "ê²°ê³¼ 3ë‹¨ê³„(ğŸŸ¢ğŸŸ¡ğŸ”´)"],
      primaryText: "ìê°€ì§„ë‹¨ ì‹œì‘í•˜ê¸°",
      secondaryText: "ì´ˆê¸°í™”"
    },
    {
      key: "contract",
      type: "checks",
      title: "ê·¼ë¡œê³„ì•½ì„œ ì ê²€",
      desc: "ì„œë¥˜ê°€ ì—†ìœ¼ë©´ ë‚˜ì¤‘ì— ë¶„ìŸ ë•Œ ë¶ˆë¦¬í•´ì§ˆ ìˆ˜ ìˆì–´ìš”.",
      items: [
        "ê·¼ë¡œê³„ì•½ì„œ ì—†ëŠ” ì§ì›ì´ ìˆë‹¤",
        "ì„ê¸ˆÂ·ê·¼ë¬´ì‹œê°„Â·íœ´ì¼ì´ ë¹ ì§„ ê³„ì•½ì„œë‹¤",
        "ê³„ì•½ ì‹œì‘ì¼ ë° ê¸°ê°„ì— ëŒ€í•œ ëª…ì‹œê°€ ì—†ë‹¤"
      ],
      hint: "ì²´í¬ 1ê°œ ì´ìƒì´ë©´ <strong>ì •ë¦¬ í•„ìš”</strong> ì‹ í˜¸ì…ë‹ˆë‹¤."
    },
    {
      key: "pay",
      type: "checks",
      title: "ê¸‰ì—¬Â·ì£¼íœ´ìˆ˜ë‹¹ ì ê²€",
      desc: "ì†Œìƒê³µì¸ ë¶„ìŸì—ì„œ ê°€ì¥ ìì£¼ ë‚˜ì˜¤ëŠ” í¬ì¸íŠ¸ì˜ˆìš”.",
      items: [
        "ì£¼ 15ì‹œê°„ ì´ìƒ ì•Œë°”ì—ê²Œ ì£¼íœ´ìˆ˜ë‹¹ì„ ì•ˆ ì¤€ë‹¤",
        "ê¸‰ì—¬ëª…ì„¸ì„œë¥¼ ì•ˆ ì£¼ê±°ë‚˜ í•©ê³„ë§Œ ì í˜€ ìˆë‹¤",
        "5ì¸ ì´ìƒì¸ë° ì—°ì¥/ì•¼ê°„ ë“± ìˆ˜ë‹¹ì„ ì§€ê¸‰í•˜ì§€ ì•ŠëŠ”ë‹¤"
      ],
      hint: "ê¸‰ì—¬ëŠ” â€˜ë§â€™ë³´ë‹¤ <strong>ê¸°ë¡</strong>ì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
    },
    {
      key: "freelance",
      type: "checks",
      title: "3.3% / í”„ë¦¬ëœì„œÂ·ë¯¸ì‹ ê³  ì ê²€ (ì¤‘ìš”)",
      desc: "ì•„ë˜ ì¤‘ í•´ë‹¹ë˜ëŠ” ê²ƒë§Œ ì²´í¬í•˜ì„¸ìš”. <strong>3ê°œ ì´ìƒ</strong> ì²´í¬ë˜ë©´ ìš°ì„  ì ê²€ ëŒ€ìƒì…ë‹ˆë‹¤.",
      items: [
        "ì›”ê¸‰Â·ì‹œê¸‰ ë°›ëŠ”ë° 3.3%ë§Œ ë—€ë‹¤",
        "ì¶œí‡´ê·¼ ì‹œê°„ì´ ì •í•´ì ¸ ìˆë‹¤",
        "ì‚¬ì¥ë‹˜ ì§€ì‹œì— ë”°ë¼ ì¼í•œë‹¤",
        "ë‹¤ë¥¸ ì‚¬ëŒìœ¼ë¡œ ëŒ€ì²´ ê·¼ë¬´ê°€ ì•ˆ ëœë‹¤",
        "â€œì ê¹ ì¼í•´ì„œâ€ ì‹ ê³  ì•ˆ í•œ ì‚¬ëŒì´ ìˆë‹¤",
        "ìˆ˜ìŠµÂ·ì²´í—˜ ê·¼ë¬´ í›„ ëˆë§Œ ì¤€ ì  ìˆë‹¤"
      ],
      hint: "ì´ ë‹¨ê³„ì—ì„œ ì²´í¬ê°€ ë§ìœ¼ë©´ ì „ì²´ ê²°ê³¼ê°€ <strong>ğŸ”´</strong>ë¡œ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆì–´ìš”."
    },
    {
      key: "leave",
      type: "checks",
      title: "ì—°ì°¨ ì ê²€",
      desc: "ê¸°ë¡ì´ ì—†ìœ¼ë©´ â€˜ì•ˆ ì¤€ ê²ƒâ€™ìœ¼ë¡œ ì˜¤í•´ë  ìˆ˜ ìˆì–´ìš”.",
      items: [
        "ì—°ì°¨ ê¸°ë¡(ëŒ€ì¥)ì´ ì—†ë‹¤",
        "1ë…„ ì´ìƒ ê·¼ë¬´í•œ ì§ì›ì´ ìˆëŠ”ë° ì—°ì°¨ ì •ì‚°ì„ ì•ˆ í–ˆë‹¤",
        "â€œìš°ë¦¬ ë§¤ì¥ì€ ì—°ì°¨ ì—†ë‹¤â€ê³  ìƒê°í–ˆë‹¤"
      ],
      hint: "ì—°ì°¨ëŠ” <strong>ê¸°ë¡</strong>ë§Œ ì •ë¦¬í•´ë„ ë¦¬ìŠ¤í¬ê°€ í¬ê²Œ ì¤„ì–´ìš”."
    },
    {
      key: "severance",
      type: "checks",
      title: "í‡´ì§ê¸ˆ ì ê²€",
      desc: "ê°‘ìê¸° ëª©ëˆì´ ë‚˜ê°ˆ ìˆ˜ ìˆëŠ” í•­ëª©ì…ë‹ˆë‹¤.",
      items: [
        "1ë…„ ì´ìƒ ê·¼ë¬´í•œ ì§ì›ì´ ìˆë‹¤",
        "ì£¼ 15ì‹œê°„ ì´ìƒ ê·¼ë¬´í–ˆë‹¤",
        "í‡´ì§ê¸ˆ/í‡´ì§ì—°ê¸ˆ ì¤€ë¹„ê°€ ì—†ë‹¤"
      ],
      hint: "ìœ„ 3ê°œê°€ ëª¨ë‘ ì²´í¬ë˜ë©´ <strong>ë¦¬ìŠ¤í¬ í¼</strong>ìœ¼ë¡œ ë´…ë‹ˆë‹¤."
    },
    {
      key: "insurance",
      type: "checks",
      title: "4ëŒ€ë³´í—˜ ì ê²€",
      desc: "ê¸°ì¤€ì„ ëª°ë¼ì„œ ë†“ì¹˜ëŠ” ê²½ìš°ê°€ ë§ì•„ìš”.",
      items: [
        "ìƒì‹œê·¼ë¡œìê°€ ìˆëŠ”ë° 4ëŒ€ë³´í—˜ì´ ì •ë¦¬ ì•ˆ ëë‹¤",
        "ì•Œë°”Â·ë‹¨ì‹œê°„ ê¸°ì¤€ì„ ì •í™•íˆ ëª¨ë¥¸ë‹¤"
      ],
      hint: "ì—…ì¢…/ê·¼ë¡œí˜•íƒœì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”."
    },
    {
      key: "dispute",
      type: "checks",
      title: "ë¶„ìŸ ëŒ€ì‘ ì ê²€",
      desc: "ë¬¸ì œ ìƒê²¼ì„ ë•Œ ê¸°ë¡/ëŒ€ì‘ ë°©ì‹ì´ ê²°ê³¼ë¥¼ ì¢Œìš°í•  ìˆ˜ ìˆì–´ìš”.",
      items: [
        "ë¬¸ì œ ìƒê¸°ë©´ ê·¸ë•Œê·¸ë•Œ ëŒ€ì‘í•œë‹¤",
        "ì¹´í†¡Â·ë¬¸ìë¡œ ê°ì •ì ìœ¼ë¡œ ë§í•œ ì  ìˆë‹¤"
      ],
      hint: "ë§ë³´ë‹¤ <strong>ë©”ì‹œì§€/ê¸°ë¡</strong>ì´ ë‚¨ìŠµë‹ˆë‹¤."
    },
    {
      key: "result",
      type: "result"
    }
  ];

  // ì‘ë‹µ ì €ì¥
  const state = {
    idx: 0,
    answers: {} // key -> boolean[]
  };

  const screen = document.getElementById("screen");
  const progressText = document.getElementById("progressText");
  const progressBar = document.getElementById("progressBar");

  function resetAll(){
    state.idx = 0;
    state.answers = {};
    render();
  }

  function setProgress(){
    const totalSteps = steps.filter(s => s.type !== "result").length - 1; // intro ì œì™¸ ì§„í–‰ë°” ê¸°ì¤€
    const current = Math.max(0, steps.slice(0, state.idx+1).filter(s => s.type === "checks").length);
    progressText.textContent = `${current} / ${totalSteps}`;
    const pct = totalSteps === 0 ? 0 : Math.round((current/totalSteps) * 100);
    progressBar.style.width = `${pct}%`;
  }

  function render(){
    setProgress();
    const step = steps[state.idx];
    if(step.type === "intro") return renderIntro(step);
    if(step.type === "checks") return renderChecks(step);
    if(step.type === "result") return renderResult();
  }

  function renderIntro(step){
    screen.innerHTML = `
      <div class="hero">
        <h1>${step.title}</h1>
        <p>${step.desc}</p>
        <div class="pillRow">
          ${step.pills.map(p => `<span class="pill">${p}</span>`).join("")}
        </div>
      </div>
      <div class="divider"></div>
      <div class="small">
        ì¤€ë¹„ë¬¼(ê¶Œì¥): ê·¼ë¡œê³„ì•½ì„œ / ê¸‰ì—¬ë‚´ì—­ / ì§ì›ëª…ë‹¨ / 4ëŒ€ë³´í—˜Â·ì›ì²œì§•ìˆ˜(3.3%) í™•ì¸ìë£Œ
      </div>
      <div class="ctaRow">
        <button class="btnPrimary" id="startBtn">${step.primaryText}</button>
        <button class="btnGhost" id="resetBtn">${step.secondaryText}</button>
      </div>
    `;
    document.getElementById("startBtn").onclick = () => { state.idx = 1; render(); };
    document.getElementById("resetBtn").onclick = () => resetAll();
  }

  function renderChecks(step){
    const existing = state.answers[step.key] || new Array(step.items.length).fill(false);
    state.answers[step.key] = existing;

    const stepNumber = steps.slice(0, state.idx+1).filter(s => s.type === "checks").length;
    const total = steps.filter(s => s.type === "checks").length;

    const htmlItems = step.items.map((text, i) => {
      const id = `${step.key}_${i}`;
      const checked = existing[i] ? "checked" : "";
      return `
        <div class="item">
          <input type="checkbox" id="${id}" ${checked} />
          <label for="${id}">${escapeHtml(text)}</label>
        </div>
      `;
    }).join("");

    const hint = step.hint ? `<div class="hint">${step.hint}</div>` : "";

    screen.innerHTML = `
      <div class="small">STEP ${stepNumber} / ${total}</div>
      <div class="hero" style="padding-top:8px;">
        <div class="stepTitle">${step.title}</div>
        <div class="stepDesc">${step.desc}</div>
      </div>

      <div class="list">${htmlItems}</div>
      ${hint}

      <div class="ctaRow">
        <button class="btnGhost" id="prevBtn">ì´ì „</button>
        <button class="btnPrimary" id="nextBtn">${state.idx === steps.length-2 ? "ê²°ê³¼ ë³´ê¸°" : "ë‹¤ìŒ"}</button>
      </div>

      <div class="ctaRow" style="margin-top:10px;">
        <button class="btnDangerGhost" id="resetBtn">ì²˜ìŒë¶€í„°</button>
      </div>
    `;

    // bind checkbox
    step.items.forEach((_, i) => {
      const el = document.getElementById(`${step.key}_${i}`);
      el.onchange = (e) => {
        state.answers[step.key][i] = !!e.target.checked;
      };
    });

    document.getElementById("prevBtn").onclick = () => {
      state.idx = Math.max(0, state.idx - 1);
      render();
    };
    document.getElementById("nextBtn").onclick = () => {
      state.idx = Math.min(steps.length - 1, state.idx + 1);
      render();
    };
    document.getElementById("resetBtn").onclick = () => resetAll();
  }

  function computeResult(){
    // ê¸°ë³¸ ì ìˆ˜: ì²´í¬ 1ê°œ = 1ì 
    // ê°€ì¤‘ ê·œì¹™:
    // - freelance ë‹¨ê³„(3.3%/ë¯¸ì‹ ê³ ): ì²´í¬ 3ê°œ ì´ìƒì´ë©´ ê°•ì œ ìœ„í—˜(ğŸ”´) íŠ¸ë¦¬ê±°
    // - severance ë‹¨ê³„: 3ê°œ ëª¨ë‘ ì²´í¬ë©´ +2 ì¶”ê°€ ê°€ì¤‘
    const keys = ["contract","pay","freelance","leave","severance","insurance","dispute"];

    let totalChecks = 0;
    let redTrigger = false;

    const checkedSummary = []; // ê²°ê³¼ í™”ë©´ì— í‘œì‹œí•  "ì£¼ì˜/ìœ„í—˜" ì¹©

    const getCount = (k) => (state.answers[k] || []).filter(Boolean).length;

    for(const k of keys){
      const c = getCount(k);
      totalChecks += c;

      if(c > 0){
        const title = steps.find(s => s.key === k)?.title || k;
        checkedSummary.push({ key:k, title, count:c });
      }
    }

    // freelance red trigger
    const freelanceCount = getCount("freelance");
    if(freelanceCount >= 3) redTrigger = true;

    // severance triple
    const severArr = state.answers["severance"] || [];
    const severAll = severArr.length === 3 && severArr.every(Boolean);
    if(severAll) totalChecks += 2;

    // ê²°ê³¼ ë ˆë²¨ ì‚°ì •
    // - redTriggerë©´ ğŸ”´
    // - totalChecks ê¸°ì¤€: 0~2 ğŸŸ¢ / 3~4 ğŸŸ¡ / 5+ ğŸ”´
    let level = "ok";
    if(redTrigger) level = "danger";
    else if(totalChecks >= 5) level = "danger";
    else if(totalChecks >= 3) level = "warn";
    else level = "ok";

    // í•µì‹¬ ì£¼ì˜ í•­ëª© ì„ ì •: count ë†’ì€ ìˆœ, freelanceëŠ” ìš°ì„ ìˆœìœ„ ë†’ê²Œ
    checkedSummary.sort((a,b)=>{
      const pr = (x)=> (x.key==="freelance"? 999 : x.count);
      return pr(b) - pr(a);
    });

    return { level, totalChecks, checkedSummary, freelanceCount, severAll };
  }

  function renderResult(){
    const r = computeResult();

    const badge = (() => {
      if(r.level === "danger"){
        return `<div class="badge"><span class="dot danger"></span><strong>ğŸ”´ ì •ë¦¬ í•„ìš” ìƒíƒœ</strong></div>`;
      }
      if(r.level === "warn"){
        return `<div class="badge"><span class="dot warn"></span><strong>ğŸŸ¡ ì£¼ì˜ í•„ìš”</strong></div>`;
      }
      return `<div class="badge"><span class="dot ok"></span><strong>ğŸŸ¢ ë¹„êµì  ì•ˆì •</strong></div>`;
    })();

    const desc = (() => {
      if(r.level === "danger"){
        return "ì²´í¬ëœ í•­ëª©ì´ ìˆìŠµë‹ˆë‹¤. ë¬¸ì œ ë°œìƒ ì‹œ ë¶ˆë¦¬í•´ì§ˆ ìˆ˜ ìˆì–´ìš”. ìš°ì„ ìˆœìœ„ë¶€í„° ì •ë¦¬í•˜ëŠ” ê±¸ ê¶Œì¥í•©ë‹ˆë‹¤.";
      }
      if(r.level === "warn"){
        return "í¬ê²Œ ë¬¸ì œ ì—†ì„ ìˆ˜ë„ ìˆì§€ë§Œ, ì²´í¬ëœ ë¶€ë¶„ì€ ë¯¸ë¦¬ ì •ë¦¬í•´ë‘ë©´ ì•ˆì „í•©ë‹ˆë‹¤.";
      }
      return "í˜„ì¬ ì²´í¬ëœ í•­ëª©ì´ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì„œë¥˜/ê¸°ë¡ì€ ê¾¸ì¤€íˆ ê´€ë¦¬í•˜ëŠ” ê²Œ ì¢‹ì•„ìš”.";
    })();

    const topChips = r.checkedSummary.slice(0, 3).map(x => {
      const cls = (x.key === "freelance" && r.freelanceCount >= 3) ? "danger" : (x.count >= 2 ? "warn" : "ok");
      const label = `${x.title.replace(" (ì¤‘ìš”)","")} Â· ${x.count}ê°œ`;
      return `<span class="chip ${cls}">${escapeHtml(label)}</span>`;
    }).join("");

    const notes = [];
    if(r.freelanceCount >= 3){
      notes.push("â€˜3.3%/í”„ë¦¬ëœì„œÂ·ë¯¸ì‹ ê³ â€™ í•­ëª©ì´ 3ê°œ ì´ìƒ ì²´í¬ë˜ì–´ ìš°ì„  ì ê²€ ëŒ€ìƒì…ë‹ˆë‹¤.");
    }
    if(r.severAll){
      notes.push("í‡´ì§ê¸ˆ 3ê°œ í•­ëª©ì´ ëª¨ë‘ ì²´í¬ë˜ì–´ ëª©ëˆ ë¦¬ìŠ¤í¬ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
    }
    if(r.totalChecks === 0){
      notes.push("ì¢‹ì•„ìš”! ê·¸ë˜ë„ ê·¼ë¡œê³„ì•½ì„œ/ê¸‰ì—¬ëª…ì„¸ì„œ/ê¸°ë¡ì€ ì •ê¸° ì ê²€ì„ ê¶Œì¥í•©ë‹ˆë‹¤.");
    }

    const noteHtml = notes.length
      ? `<div class="hint"><strong>ì°¸ê³ </strong><br>${notes.map(n=>`â€¢ ${escapeHtml(n)}`).join("<br>")}</div>`
      : "";

    screen.innerHTML = `
      <div class="hero" style="padding-top:6px;">
        <div class="resultTitle">ìê°€ì§„ë‹¨ ê²°ê³¼</div>
        ${badge}
        <p class="resultDesc">${desc}</p>

        <div class="chips">
          ${topChips || `<span class="chip ok">ì²´í¬ëœ í•µì‹¬ í•­ëª© ì—†ìŒ</span>`}
        </div>

        ${noteHtml}

        <div class="divider"></div>

        <div class="stepTitle" style="margin-bottom:6px;">ë°”ë¡œ í•˜ë©´ ì¢‹ì€ 3ê°€ì§€</div>
        <div class="list" style="margin-top:10px;">
          <div class="item"><span class="dot ok" aria-hidden="true"></span><div style="flex:1;">
            ê·¼ë¡œê³„ì•½ì„œ ìµœì‹  ì–‘ì‹ìœ¼ë¡œ ì •ë¦¬(ì•Œë°” í¬í•¨)
            <div class="small">â€˜ë§â€™ë³´ë‹¤ â€˜ë¬¸ì„œâ€™ê°€ ë‚¨ìŠµë‹ˆë‹¤</div>
          </div></div>
          <div class="item"><span class="dot warn" aria-hidden="true"></span><div style="flex:1;">
            ê¸‰ì—¬ëª…ì„¸ì„œ í•­ëª© ë¶„ë¦¬(ì£¼íœ´/ê³µì œ ë“± í‘œì‹œ)
            <div class="small">ë‚˜ì¤‘ì— ì„¤ëª… ê°€ëŠ¥í•œ í˜•íƒœë¡œ</div>
          </div></div>
          <div class="item"><span class="dot danger" aria-hidden="true"></span><div style="flex:1;">
            3.3% ì²˜ë¦¬/ë¯¸ì‹ ê³  ì¸ì› ì „ìˆ˜ ì ê²€
            <div class="small">í•´ë‹¹ë˜ë©´ ìš°ì„ ìˆœìœ„ë¥¼ ì˜¬ë¦¬ì„¸ìš”</div>
          </div></div>
        </div>

        <div class="ctaRow">
          <button class="btnGhost" id="backBtn">ë‹¤ì‹œ ì²´í¬í•˜ê¸°</button>
          <button class="btnPrimary" id="copyBtn">ê²°ê³¼ ìš”ì•½ ë³µì‚¬</button>
        </div>

        <div class="ctaRow" style="margin-top:10px;">
          <button class="btnDangerGhost" id="resetBtn">ì²˜ìŒë¶€í„°</button>
        </div>

        <div class="small" style="margin-top:12px;">
          ë°°í¬ìš© ìš´ì˜ íŒ: ê²°ê³¼ ìš”ì•½ì„ ì¹´í†¡ìœ¼ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ë©´ ì°¸ì—¬ìœ¨ì´ ì˜¬ë¼ê°‘ë‹ˆë‹¤.
        </div>
      </div>
    `;

    document.getElementById("backBtn").onclick = () => {
      // ë§ˆì§€ë§‰ ì²´í¬ stepìœ¼ë¡œ
      const lastCheckIndex = [...steps].map((s,i)=>({s,i})).filter(x=>x.s.type==="checks").pop().i;
      state.idx = lastCheckIndex;
      render();
    };

    document.getElementById("resetBtn").onclick = () => resetAll();

    document.getElementById("copyBtn").onclick = async () => {
      const levelText = r.level === "danger" ? "ğŸ”´ ì •ë¦¬ í•„ìš”" : r.level === "warn" ? "ğŸŸ¡ ì£¼ì˜ í•„ìš”" : "ğŸŸ¢ ë¹„êµì  ì•ˆì •";
      const top = r.checkedSummary.slice(0, 5).map(x => `- ${x.title.replace(" (ì¤‘ìš”)","")}: ${x.count}ê°œ`).join("\n") || "- ì²´í¬ëœ í•µì‹¬ í•­ëª© ì—†ìŒ";
      const msg =
`[ë…¸ë¬´ ë¦¬ìŠ¤í¬ ìê°€ì§„ë‹¨ ê²°ê³¼]
ê²°ê³¼: ${levelText}
ì²´í¬ í•©ê³„(ê°€ì¤‘ í¬í•¨): ${r.totalChecks}

ì£¼ìš” ì²´í¬:
${top}

ì°¸ê³ : ë³¸ ê²°ê³¼ëŠ” ìê°€ ì²´í¬ ê¸°ë°˜ ì°¸ê³ ìš©ì…ë‹ˆë‹¤.`;
      try{
        await navigator.clipboard.writeText(msg);
        alert("ê²°ê³¼ ìš”ì•½ì„ ë³µì‚¬í–ˆì–´ìš”. (ë¶™ì—¬ë„£ê¸° ê°€ëŠ¥)");
      }catch(e){
        // fallback: prompt
        window.prompt("ì•„ë˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ì„¸ìš”:", msg);
      }
    };
  }

  function escapeHtml(s){
    return String(s)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  // init
  render();
</script>
</body>
</html>
